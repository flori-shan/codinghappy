1. 安装 docker 程序
ali 源 ：https://opsx.alibaba.com/mirror

1.1 更改 yum 源 ： wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
1.2 添加 docker 源： wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
1.3 添加 kubernetes yum 文件： kubernetes.repo
[kubernetes]
name=Kubernetes Repository
baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/
gpgcheck=1
enable=1
gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
    https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg

1.4 添加 sysctl bridge -> /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.bridge.bridge-nf-call-arptables = 1

sysctl -p /etc/sysctl.d/k8s.conf

1.5 安转 docker
yum install -y docker-ce

1.6 配置 docker
/etc/docker/daemon.json
{"registry-mirrors": ["https://registry.docker-cn.com"],
  "graph": "/data/docker"}
/usr/lib/systemd/system/docker.service 添加：
Environment="HTTPS_PROXY=http://www.ik8s.io:10070"
Environment="NO_PROXY=127.0.0.0/8"
ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock
ExecStartPost=/usr/sbin/iptables -P FORWARD ACCEPT

systemctl daemon-reload && systemctl restart docker

1.7 安装 kubernetes
yum install -y kubeadm kubectl kubelet

1.8 忽略 swap 报错
/etc/sysconfig/kubelet
KUBELET_EXTRA_ARGS="--fail-swap-on=false